<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="800.0" prefWidth="1300.0" 
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.ecommerce.controller.AdminController"
            stylesheets="@../../../css/style.css"
            style="-fx-background-color: #F1F5F9;">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-bar">
            <Label text="TECHSHOP ADMIN" textFill="#3C50E0">
                <font><Font name="System Bold" size="20.0" /></font>
            </Label>
            
            <HBox HBox.hgrow="ALWAYS" />
            
            <ToggleButton fx:id="btnTheme" onAction="#handleToggleTheme" text="ðŸŒ™ Cháº¿ Ä‘á»™ Tá»‘i" styleClass="btn-secondary"/>
            <Button onAction="#handleAdminProfile" text="Há»“ sÆ¡" styleClass="btn-secondary"/>
            <Button onAction="#handleLogout" text="ÄÄƒng xuáº¥t" styleClass="btn-danger"/>
        </HBox>
    </top>
    
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE"  style="-fx-background-color: transparent;">
            
            <Tab text="Dashboard">
                <VBox spacing="20.0" style="-fx-padding: 30;">
                    <Label text="Tá»•ng quan" styleClass="label-title"/>
                    
                    <HBox spacing="20.0">
                        <VBox styleClass="card-container" prefWidth="250">
                            <Label text="DOANH THU" styleClass="label-subtitle"/>
                            <Label fx:id="lblDashRevenue" text="Loading..." style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3C50E0;"/>
                        </VBox>
                        <VBox styleClass="card-container" prefWidth="250">
                            <Label text="ÄÆ N HÃ€NG" styleClass="label-subtitle"/>
                            <Label fx:id="lblDashOrders" text="Loading..." style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3C50E0;"/>
                        </VBox>
                        <VBox styleClass="card-container" prefWidth="250">
                            <Label text="Sáº¢N PHáº¨M" styleClass="label-subtitle"/>
                            <Label fx:id="lblDashProducts" text="Loading..." style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3C50E0;"/>
                        </VBox>
                    </HBox>
                    
                    <VBox styleClass="card-container" VBox.vgrow="ALWAYS">
                        <Label text="Biá»ƒu Ä‘á»“ doanh thu" styleClass="label-title"/>
                        <BarChart fx:id="revenueChart">
                            <xAxis><CategoryAxis label="Thá»i gian" /></xAxis>
                            <yAxis><NumberAxis label="VND" /></yAxis>
                        </BarChart>
                    </VBox>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ Sáº£n pháº©m">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="15.0" styleClass="card-container" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <VBox spacing="5.0">
                            <Label text="TÃªn sáº£n pháº©m:" style="-fx-font-weight: bold;"/><TextField fx:id="txtName" promptText="Nháº­p tÃªn" prefWidth="200.0"/>
                            <Label text="GiÃ¡ tiá»n:" style="-fx-font-weight: bold;"/><TextField fx:id="txtPrice" promptText="Nháº­p giÃ¡" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Danh má»¥c:" style="-fx-font-weight: bold;"/><TextField fx:id="txtCategory" promptText="Ão/Quáº§n/GiÃ y" />
                            <Label text="Giá»›i tÃ­nh:" style="-fx-font-weight: bold;"/><TextField fx:id="txtGender" promptText="Nam/Ná»¯" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Kho:" style="-fx-font-weight: bold;"/><TextField fx:id="txtQuantity" promptText="Sá»‘ lÆ°á»£ng" />
                            <Label text="áº¢nh:" style="-fx-font-weight: bold;"/><HBox spacing="5.0"><TextField fx:id="txtImage" /><Button text="..." onAction="#handleChooseImage" /></HBox>
                        </VBox>
                        <VBox alignment="CENTER"><ImageView fx:id="imgPreview" fitHeight="80.0" fitWidth="80.0" /><Label fx:id="lblImageName" /></VBox>
                        <VBox HBox.hgrow="ALWAYS">
                             <Label text="MÃ´ táº£:" style="-fx-font-weight: bold;"/><TextField fx:id="txtDescription" />
                             <HBox spacing="10.0" alignment="BOTTOM_RIGHT" VBox.vgrow="ALWAYS">
                                 <Button onAction="#handleAddProduct" text="THÃŠM" style="-fx-background-color: #27ae60; -fx-text-fill: white;" />
                                 <Button onAction="#handleUpdateProduct" text="Sá»¬A" style="-fx-background-color: #f39c12; -fx-text-fill: white;" />
                                 <Button onAction="#handleDeleteProduct" text="XÃ“A" style="-fx-background-color: #c0392b; -fx-text-fill: white;" />
                                 <Button onAction="#handleClearInput" text="Má»›i" />
                             </HBox>
                        </VBox>
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                        <Label text="ðŸ” TÃŒM KIáº¾M:" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtSearchProduct" promptText="TÃªn, mÃ£ SP..." HBox.hgrow="ALWAYS" />
                        <Label text="| Lá»ŒC DANH Má»¤C:" style="-fx-font-weight: bold;"/>
                        <ComboBox fx:id="cbFilterCategory" prefWidth="150.0" />
                    </HBox>
                    
                    <TableView fx:id="tableProduct" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colId" text="ID" prefWidth="50.0"/>
                            <TableColumn fx:id="colName" text="TÃªn Sáº£n Pháº©m" prefWidth="250.0"/>
                            <TableColumn fx:id="colPrice" text="GiÃ¡" prefWidth="100.0"/>
                            <TableColumn fx:id="colQuantity" text="Kho" prefWidth="80.0"/>
                            <TableColumn fx:id="colCategory" text="Danh má»¥c" prefWidth="100.0"/>
                            <TableColumn fx:id="colImage" text="áº¢nh" prefWidth="150.0"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="ÄÆ¡n hÃ ng">
                <VBox spacing="20.0" style="-fx-padding: 30;">
                    <Label text="Quáº£n lÃ½ ÄÆ¡n hÃ ng" styleClass="label-title"/>
                    <VBox spacing="10.0" styleClass="card-container" VBox.vgrow="ALWAYS">
                        <HBox spacing="10.0">
                            <Button onAction="#handleApproveOrder" text="âœ“ Duyá»‡t Ä‘Æ¡n" styleClass="btn-primary" style="-fx-background-color: #10B981;"/>
                            <Button onAction="#handleCancelOrder" text="âœ• Há»§y Ä‘Æ¡n" styleClass="btn-danger"/>
                            <Button onAction="#handleRefreshOrders" text="âŸ³ Táº£i láº¡i" styleClass="btn-secondary"/>
                            <HBox HBox.hgrow="ALWAYS" alignment="CENTER_RIGHT">
                                <TextField fx:id="txtSearchOrder" promptText="TÃ¬m mÃ£ Ä‘Æ¡n..." />
                            </HBox>
                        </HBox>
                        <TableView fx:id="tableOrder" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colOrderId" text="MÃ£ ÄH" />
                                <TableColumn fx:id="colUserId" text="User ID" />
                                <TableColumn fx:id="colTotal" text="Tá»•ng tiá»n" />
                                <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" />
                                <TableColumn fx:id="colDate" text="NgÃ y Ä‘áº·t" />
                                <TableColumn fx:id="colPayment" text="Thanh toÃ¡n" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>
            
            <Tab text="NgÆ°á»i dÃ¹ng">
                <VBox spacing="20.0" style="-fx-padding: 30;">
                    <Label text="Quáº£n lÃ½ NgÆ°á»i dÃ¹ng" styleClass="label-title"/>
                    <VBox spacing="10.0" styleClass="card-container" VBox.vgrow="ALWAYS">
                        <HBox spacing="10.0">
                            <Button onAction="#handleLockUser" text="KhÃ³a / Má»Ÿ khÃ³a" styleClass="btn-primary" style="-fx-background-color: #F39C12;"/>
                            <Button onAction="#handleDeleteUser" text="XÃ³a tÃ i khoáº£n" styleClass="btn-danger"/>
                            <Button onAction="#handleRefreshUsers" text="âŸ³ Táº£i láº¡i" styleClass="btn-secondary"/>
                        </HBox>
                        <TableView fx:id="tableUser" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colUserTableId" text="ID" />
                                <TableColumn fx:id="colUsername" text="Username" />
                                <TableColumn fx:id="colEmail" text="Email" />
                                <TableColumn fx:id="colPhone" text="SÄT" />
                                <TableColumn fx:id="colTotalOrders" text="ÄÆ¡n hÃ ng" />
                                <TableColumn fx:id="colUserStatus" text="Tráº¡ng thÃ¡i" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>
            
            <Tab text="ÄÃ¡nh giÃ¡">
                <VBox spacing="20.0" style="-fx-padding: 30;">
                    <Label text="Pháº£n há»“i khÃ¡ch hÃ ng" styleClass="label-title"/>
                    <VBox spacing="10.0" styleClass="card-container" VBox.vgrow="ALWAYS">
                        <HBox spacing="10.0">
                            <Button onAction="#handleDeleteReview" text="XÃ³a Ä‘Ã¡nh giÃ¡" styleClass="btn-danger"/>
                            <Button onAction="#handleRefreshReviews" text="âŸ³ Táº£i láº¡i" styleClass="btn-secondary"/>
                        </HBox>
                        <TableView fx:id="tableReview" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colReviewId" text="ID" />
                                <TableColumn fx:id="colReviewUser" text="NgÆ°á»i dÃ¹ng" />
                                <TableColumn fx:id="colReviewProduct" text="Sáº£n pháº©m" />
                                <TableColumn fx:id="colReviewRating" text="Sao" />
                                <TableColumn fx:id="colReviewComment" text="Ná»™i dung" prefWidth="300"/>
                                <TableColumn fx:id="colReviewDate" text="NgÃ y" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>
            
            <Tab text="Voucher">
                <VBox spacing="20.0" style="-fx-padding: 30;">
                    <Label text="MÃ£ giáº£m giÃ¡" styleClass="label-title"/>
                    <HBox spacing="20.0" VBox.vgrow="ALWAYS">
                        <VBox spacing="15.0" styleClass="card-container" prefWidth="300">
                            <Label text="Táº¡o mÃ£ má»›i" style="-fx-font-weight: bold;"/>
                            <VBox spacing="5.0"><Label text="MÃ£ Code:" styleClass="label-subtitle"/><TextField fx:id="txtVoucherCode"/></VBox>
                            <VBox spacing="5.0"><Label text="Giáº£m (%):" styleClass="label-subtitle"/><TextField fx:id="txtVoucherPercent"/></VBox>
                            <VBox spacing="5.0"><Label text="Sá»‘ lÆ°á»£ng:" styleClass="label-subtitle"/><TextField fx:id="txtVoucherQty"/></VBox>
                            <VBox spacing="5.0"><Label text="Háº¿t háº¡n:" styleClass="label-subtitle"/><DatePicker fx:id="dpVoucherDate"/></VBox>
                            <Button onAction="#handleAddVoucher" text="Táº¡o Voucher" styleClass="btn-primary" maxWidth="Infinity"/>
                        </VBox>
                        
                        <VBox spacing="10.0" styleClass="card-container" HBox.hgrow="ALWAYS">
                            <Button onAction="#handleDeleteVoucher" text="XÃ³a mÃ£ chá»n" styleClass="btn-danger"/>
                            <TableView fx:id="tableVoucher" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colVoucherCode" text="MÃ£ Code" />
                                    <TableColumn fx:id="colVoucherPercent" text="Giáº£m (%)" />
                                    <TableColumn fx:id="colVoucherQty" text="Sá»‘ lÆ°á»£ng" />
                                    <TableColumn fx:id="colVoucherDate" text="Háº¿t háº¡n" />
                                </columns>
                            </TableView>
                        </VBox>
                    </HBox>
                </VBox>
            </Tab>
            
        </TabPane>
    </center>
</BorderPane>