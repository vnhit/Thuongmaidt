<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="750.0" prefWidth="1250.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ecommerce.controller.AdminController">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-background-color: #2c3e50; -fx-padding: 15; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 0, 5, 0, 0);">
            <Label text="Há»† THá»NG QUáº¢N TRá»Š (ADMIN)" textFill="WHITE">
                <font><Font name="Segoe UI Bold" size="22.0" /></font>
            </Label>
            <HBox HBox.hgrow="ALWAYS" />
            <Button onAction="#handleLogout" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="ÄÄƒng xuáº¥t" />
        </HBox>
    </top>
    
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: #ecf0f1;">
            
            <Tab text="Quáº£n lÃ½ Sáº£n pháº©m">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <VBox spacing="5.0">
                            <Label text="TÃªn sáº£n pháº©m:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtName" promptText="Nháº­p tÃªn sáº£n pháº©m" prefWidth="200.0"/>
                            <Label text="GiÃ¡ tiá»n:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtPrice" promptText="Nháº­p giÃ¡ (sá»‘)" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Danh má»¥c:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtCategory" promptText="Ão/Quáº§n/GiÃ y" />
                            <Label text="Giá»›i tÃ­nh:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtGender" promptText="Nam/Ná»¯/Tráº» em/Unisex" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Sá»‘ lÆ°á»£ng kho:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtQuantity" promptText="Nháº­p sá»‘ lÆ°á»£ng" />
                            <Label text="HÃ¬nh áº£nh:" style="-fx-font-weight: bold;"/>
                            <HBox spacing="5.0">
                                <TextField fx:id="txtImage" promptText="TÃªn file áº£nh" prefWidth="120.0" />
                                <Button text="..." onAction="#handleChooseImage" />
                            </HBox>
                        </VBox>
                        <VBox spacing="5.0" alignment="TOP_CENTER" style="-fx-border-color: #bdc3c7; -fx-border-style: dashed; -fx-padding: 5;">
                            <ImageView fx:id="imgPreview" fitHeight="100.0" fitWidth="100.0" pickOnBounds="true" preserveRatio="true" />
                            <Label fx:id="lblImageName" text="Preview" style="-fx-font-size: 10px; -fx-text-fill: gray;" />
                        </VBox>
                        <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                             <Label text="MÃ´ táº£:" style="-fx-font-weight: bold;"/>
                             <TextField fx:id="txtDescription" promptText="MÃ´ táº£ chi tiáº¿t sáº£n pháº©m" />
                             <VBox VBox.vgrow="ALWAYS" />
                             <HBox spacing="10.0" alignment="BOTTOM_RIGHT">
                                 <Button onAction="#handleAddProduct" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="THÃŠM Má»šI" />
                                 <Button onAction="#handleUpdateProduct" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="Cáº¬P NHáº¬T" />
                                 <Button onAction="#handleDeleteProduct" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="XÃ“A" />
                                 <Button onAction="#handleClearInput" text="LÃ m má»›i" style="-fx-cursor: hand;" />
                             </HBox>
                        </VBox>
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: white; -fx-padding: 8; -fx-background-radius: 5;">
                        <Label text="ðŸ” TÃŒM KIáº¾M:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;" />
                        <TextField fx:id="txtSearchProduct" promptText="Nháº­p tÃªn, mÃ£ hoáº·c danh má»¥c..." HBox.hgrow="ALWAYS" style="-fx-background-radius: 15;" />
                    </HBox>
                    
                    <TableView fx:id="tableProduct" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="50.0" text="ID" />
                            <TableColumn fx:id="colName" prefWidth="250.0" text="TÃªn Sáº£n Pháº©m" />
                            <TableColumn fx:id="colPrice" prefWidth="120.0" text="GiÃ¡ Tiá»n" />
                            <TableColumn fx:id="colQuantity" prefWidth="80.0" text="Tá»“n Kho" />
                            <TableColumn fx:id="colCategory" prefWidth="120.0" text="Danh má»¥c" />
                            <TableColumn fx:id="colImage" prefWidth="150.0" text="File áº¢nh" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ ÄÆ¡n hÃ ng">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="10.0" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                        <Label text="TÃ¡c vá»¥:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
                        <Button onAction="#handleApproveOrder" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="âœ“ DUYá»†T ÄÆ N" />
                        <Button onAction="#handleCancelOrder" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="âœ• Há»¦Y ÄÆ N" />
                        <Button onAction="#handleRefreshOrders" text="âŸ³ Táº£i láº¡i" style="-fx-cursor: hand;" />
                        <HBox HBox.hgrow="ALWAYS" alignment="CENTER_RIGHT" spacing="5.0">
                            <Label text="ðŸ” TÃ¬m kiáº¿m:" style="-fx-font-weight: bold;" />
                            <TextField fx:id="txtSearchOrder" promptText="MÃ£ ÄH / User ID / Tráº¡ng thÃ¡i..." prefWidth="250.0" style="-fx-background-radius: 15;" />
                        </HBox>
                    </HBox>
                    <TableView fx:id="tableOrder" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colOrderId" prefWidth="80.0" text="MÃ£ ÄH" />
                            <TableColumn fx:id="colUserId" prefWidth="80.0" text="User ID" />
                            <TableColumn fx:id="colTotal" prefWidth="150.0" text="Tá»•ng tiá»n" />
                            <TableColumn fx:id="colStatus" prefWidth="150.0" text="Tráº¡ng thÃ¡i" />
                            <TableColumn fx:id="colDate" prefWidth="180.0" text="NgÃ y Ä‘áº·t" />
                            <TableColumn fx:id="colPayment" prefWidth="200.0" text="Thanh toÃ¡n" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ NgÆ°á»i dÃ¹ng">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="10.0" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                        <Label text="TÃ¡c vá»¥:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
                        <Button onAction="#handleLockUser" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="ðŸ”’ KHÃ“A / Má»ž KHÃ“A" />
                        <Button onAction="#handleDeleteUser" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="âœ• XÃ“A VÄ¨NH VIá»„N" />
                        <Button onAction="#handleRefreshUsers" text="âŸ³ Táº£i láº¡i danh sÃ¡ch" style="-fx-cursor: hand;" />
                    </HBox>
                    <TableView fx:id="tableUser" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colUserTableId" prefWidth="60.0" text="ID" />
                            <TableColumn fx:id="colUsername" prefWidth="150.0" text="TÃªn Ä‘Äƒng nháº­p" />
                            <TableColumn fx:id="colEmail" prefWidth="220.0" text="Email" />
                            <TableColumn fx:id="colPhone" prefWidth="120.0" text="Sá»‘ Ä‘iá»‡n thoáº¡i" />
                            <TableColumn fx:id="colTotalOrders" prefWidth="100.0" text="ÄÆ¡n Ä‘Ã£ mua" />
                            <TableColumn fx:id="colUserStatus" prefWidth="120.0" text="Tráº¡ng thÃ¡i" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ ÄÃ¡nh giÃ¡">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="10.0" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                        <Label text="TÃ¡c vá»¥:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
                        <Button onAction="#handleDeleteReview" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="âœ• XÃ“A ÄÃNH GIÃ VI PHáº M" />
                        <Button onAction="#handleRefreshReviews" text="âŸ³ Táº£i láº¡i" style="-fx-cursor: hand;" />
                    </HBox>
                    <TableView fx:id="tableReview" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colReviewId" prefWidth="50.0" text="ID" />
                            <TableColumn fx:id="colReviewUser" prefWidth="120.0" text="NgÆ°á»i dÃ¹ng" />
                            <TableColumn fx:id="colReviewProduct" prefWidth="200.0" text="Sáº£n pháº©m" />
                            <TableColumn fx:id="colReviewRating" prefWidth="60.0" text="Sao" />
                            <TableColumn fx:id="colReviewComment" prefWidth="350.0" text="Ná»™i dung bÃ¬nh luáº­n" />
                            <TableColumn fx:id="colReviewDate" prefWidth="150.0" text="NgÃ y Ä‘Ã¡nh giÃ¡" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ Voucher">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="15.0" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <VBox spacing="5.0">
                            <Label text="MÃ£ Voucher:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtVoucherCode" promptText="VD: TET2025" style="-fx-text-transform: uppercase;"/>
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Má»©c giáº£m (%):" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtVoucherPercent" promptText="10, 20, 50..." />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Sá»‘ lÆ°á»£ng:" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtVoucherQty" promptText="Sá»‘ láº§n dÃ¹ng" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Háº¿t háº¡n:" style="-fx-font-weight: bold;"/>
                            <DatePicker fx:id="dpVoucherDate" />
                        </VBox>
                        <VBox spacing="5.0" alignment="BOTTOM_LEFT">
                            <Button onAction="#handleAddVoucher" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="Táº O MÃƒ" />
                        </VBox>
                        <VBox spacing="5.0" alignment="BOTTOM_LEFT">
                            <Button onAction="#handleDeleteVoucher" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="XÃ“A MÃƒ CHá»ŒN" />
                        </VBox>
                    </HBox>
                    <TableView fx:id="tableVoucher" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colVoucherCode" text="MÃ£ Code" prefWidth="150.0"/>
                            <TableColumn fx:id="colVoucherPercent" text="Má»©c Giáº£m (%)" prefWidth="100.0" />
                            <TableColumn fx:id="colVoucherQty" text="Sá»‘ lÆ°á»£ng" prefWidth="100.0" />
                            <TableColumn fx:id="colVoucherDate" text="NgÃ y háº¿t háº¡n" prefWidth="150.0"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Thá»‘ng kÃª Doanh thu">
                <VBox alignment="CENTER" spacing="20.0" style="-fx-padding: 30; -fx-background-color: white;">
                    <Label text="BIá»‚U Äá»’ DOANH THU THEO NGÃ€Y" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                    <Button text="Cáº­p nháº­t dá»¯ liá»‡u má»›i nháº¥t" onAction="#handleLoadChart" style="-fx-cursor: hand; -fx-font-size: 14px; -fx-background-color: #34495e; -fx-text-fill: white;" />
                    <BarChart fx:id="revenueChart" title="Tá»•ng tiá»n (VND)" VBox.vgrow="ALWAYS" legendVisible="false">
                        <xAxis> <CategoryAxis label="NgÃ y" side="BOTTOM" /> </xAxis>
                        <yAxis> <NumberAxis label="Doanh thu" side="LEFT" /> </yAxis>
                    </BarChart>
                </VBox>
            </Tab>
            
        </TabPane>
    </center>
</BorderPane>