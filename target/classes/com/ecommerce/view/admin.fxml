<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="750.0" prefWidth="1250.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ecommerce.controller.AdminController" stylesheets="@../../../css/style.css">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-bar">
            <Label text="TECHSHOP - ADMIN DASHBOARD" styleClass="header-title">
                <font><Font name="Segoe UI Bold" size="24.0" /></font>
            </Label>
            <HBox HBox.hgrow="ALWAYS" />
            
            <ToggleButton fx:id="btnTheme" onAction="#handleToggleTheme" text="ðŸŒ™ Cháº¿ Ä‘á»™ Tá»‘i" />
            <Button onAction="#handleAdminProfile" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="ðŸ‘¤ Há»“ sÆ¡" />
            <Button onAction="#handleLogout" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="ÄÄƒng xuáº¥t" />
        </HBox>
    </top>
    
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: #ecf0f1;">
            
            <Tab text="Sáº£nh chÃ­nh">
                <VBox spacing="20.0" style="-fx-padding: 30;" alignment="TOP_CENTER">
                    <Label text="Tá»”NG QUAN Há»† THá»NG" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                    
                    <HBox spacing="30.0" alignment="CENTER" >
                        <HBox spacing="20.0" alignment="CENTER">
    <VBox prefWidth="220" styleClass="dash-card, dash-card-1" alignment="CENTER">
        <Label text="DOANH THU" textFill="WHITE" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
        <Label fx:id="lblDashRevenue" text="..." textFill="WHITE" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
    </VBox>
    
    <VBox prefWidth="220" styleClass="dash-card, dash-card-2" alignment="CENTER">
        <Label text="ÄÆ N HÃ€NG" textFill="WHITE" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
        <Label fx:id="lblDashOrders" text="..." textFill="WHITE" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
    </VBox>
    
    <VBox prefWidth="220" styleClass="dash-card, dash-card-3" alignment="CENTER">
        <Label text="KHÃCH HÃ€NG" textFill="WHITE" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
        <Label fx:id="lblDashUsers" text="..." textFill="WHITE" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
    </VBox>
    
    <VBox prefWidth="220" styleClass="dash-card, dash-card-4" alignment="CENTER">
        <Label text="Sáº¢N PHáº¨M" textFill="WHITE" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
        <Label fx:id="lblDashProducts" text="..." textFill="WHITE" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
    </VBox>
</HBox>
                    </HBox>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ Sáº£n pháº©m">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="15.0" styleClass="card-container" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
                        <VBox spacing="5.0">
                            <Label text="TÃªn sáº£n pháº©m:" style="-fx-font-weight: bold;"/><TextField fx:id="txtName" promptText="Nháº­p tÃªn" prefWidth="200.0"/>
                            <Label text="GiÃ¡ tiá»n:" style="-fx-font-weight: bold;"/><TextField fx:id="txtPrice" promptText="Nháº­p giÃ¡" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Danh má»¥c:" style="-fx-font-weight: bold;"/><TextField fx:id="txtCategory" promptText="Ão/Quáº§n/GiÃ y" />
                            <Label text="Giá»›i tÃ­nh:" style="-fx-font-weight: bold;"/><TextField fx:id="txtGender" promptText="Nam/Ná»¯" />
                        </VBox>
                        <VBox spacing="5.0">
                            <Label text="Kho:" style="-fx-font-weight: bold;"/><TextField fx:id="txtQuantity" promptText="Sá»‘ lÆ°á»£ng" />
                            <Label text="áº¢nh:" style="-fx-font-weight: bold;"/><HBox spacing="5.0"><TextField fx:id="txtImage" /><Button text="..." onAction="#handleChooseImage" /></HBox>
                        </VBox>
                        <VBox alignment="CENTER"><ImageView fx:id="imgPreview" fitHeight="80.0" fitWidth="80.0" /><Label fx:id="lblImageName" /></VBox>
                        <VBox HBox.hgrow="ALWAYS">
                             <Label text="MÃ´ táº£:" style="-fx-font-weight: bold;"/><TextField fx:id="txtDescription" />
                             <HBox spacing="10.0" alignment="BOTTOM_RIGHT" VBox.vgrow="ALWAYS">
                                 <Button onAction="#handleAddProduct" text="THÃŠM" style="-fx-background-color: #27ae60; -fx-text-fill: white;" />
                                 <Button onAction="#handleUpdateProduct" text="Sá»¬A" style="-fx-background-color: #f39c12; -fx-text-fill: white;" />
                                 <Button onAction="#handleDeleteProduct" text="XÃ“A" style="-fx-background-color: #c0392b; -fx-text-fill: white;" />
                                 <Button onAction="#handleClearInput" text="Má»›i" />
                             </HBox>
                        </VBox>
                    </HBox>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                        <Label text="ðŸ” TÃŒM KIáº¾M:" style="-fx-font-weight: bold;"/>
                        <TextField fx:id="txtSearchProduct" promptText="TÃªn, mÃ£ SP..." HBox.hgrow="ALWAYS" />
                        <Label text="| Lá»ŒC DANH Má»¤C:" style="-fx-font-weight: bold;"/>
                        <ComboBox fx:id="cbFilterCategory" prefWidth="150.0" />
                    </HBox>
                    
                    <TableView fx:id="tableProduct" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colId" text="ID" prefWidth="50.0"/>
                            <TableColumn fx:id="colName" text="TÃªn Sáº£n Pháº©m" prefWidth="250.0"/>
                            <TableColumn fx:id="colPrice" text="GiÃ¡" prefWidth="100.0"/>
                            <TableColumn fx:id="colQuantity" text="Kho" prefWidth="80.0"/>
                            <TableColumn fx:id="colCategory" text="Danh má»¥c" prefWidth="100.0"/>
                            <TableColumn fx:id="colImage" text="áº¢nh" prefWidth="150.0"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ ÄÆ¡n hÃ ng">
                <VBox spacing="10.0"   style="-fx-padding: 15;">
                    <HBox spacing="10.0" styleClass="card-container" alignment="CENTER_LEFT">
                        <Button onAction="#handleApproveOrder" text="âœ“ DUYá»†T ÄÆ N" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/>
                        <Button onAction="#handleCancelOrder" text="âœ• Há»¦Y ÄÆ N" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
                        <Button onAction="#handleRefreshOrders" text="âŸ³ Táº£i láº¡i" />
                        <HBox HBox.hgrow="ALWAYS" alignment="CENTER_RIGHT"><TextField fx:id="txtSearchOrder" promptText="TÃ¬m kiáº¿m..." /></HBox>
                    </HBox>
                    <TableView fx:id="tableOrder" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colOrderId" text="MÃ£" />
                            <TableColumn fx:id="colUserId" text="User" />
                            <TableColumn fx:id="colTotal" text="Tá»•ng tiá»n" prefWidth="150.0"/>
                            <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="150.0"/>
                            <TableColumn fx:id="colDate" text="NgÃ y" prefWidth="150.0"/>
                            <TableColumn fx:id="colPayment" text="Thanh toÃ¡n" prefWidth="150.0"/>
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ NgÆ°á»i dÃ¹ng">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="10.0" styleClass="card-container">
                        <Button onAction="#handleLockUser" text="ðŸ”’ KHÃ“A / Má»ž" style="-fx-background-color: #f39c12; -fx-text-fill: white;"/>
                        <Button onAction="#handleDeleteUser" text="âœ• XÃ“A" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
                        <Button onAction="#handleRefreshUsers" text="âŸ³ Táº£i láº¡i" />
                    </HBox>
                    <TableView fx:id="tableUser" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colUserTableId" text="ID" />
                            <TableColumn fx:id="colUsername" text="Username" prefWidth="150.0"/>
                            <TableColumn fx:id="colEmail" text="Email" prefWidth="200.0"/>
                            <TableColumn fx:id="colPhone" text="SÄT" />
                            <TableColumn fx:id="colTotalOrders" text="ÄÆ¡n hÃ ng" />
                            <TableColumn fx:id="colUserStatus" text="Tráº¡ng thÃ¡i" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ ÄÃ¡nh giÃ¡">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="10.0" styleClass="card-container">
                        <Button onAction="#handleDeleteReview" text="âœ• XÃ“A ÄÃNH GIÃ" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
                        <Button onAction="#handleRefreshReviews" text="âŸ³ Táº£i láº¡i" />
                    </HBox>
                    <TableView fx:id="tableReview" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colReviewId" text="ID" />
                            <TableColumn fx:id="colReviewUser" text="User" />
                            <TableColumn fx:id="colReviewProduct" text="Sáº£n pháº©m" />
                            <TableColumn fx:id="colReviewRating" text="Sao" />
                            <TableColumn fx:id="colReviewComment" text="Ná»™i dung" prefWidth="300.0"/>
                            <TableColumn fx:id="colReviewDate" text="NgÃ y" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Quáº£n lÃ½ Voucher">
                <VBox spacing="10.0" style="-fx-padding: 15;">
                    <HBox spacing="15.0" styleClass="card-container">
                        <VBox><Label text="MÃ£:" /><TextField fx:id="txtVoucherCode" /></VBox>
                        <VBox><Label text="Má»©c giáº£m (%):" /><TextField fx:id="txtVoucherPercent" /></VBox>
                        <VBox><Label text="Sá»‘ lÆ°á»£ng:" /><TextField fx:id="txtVoucherQty" /></VBox>
                        <VBox><Label text="Háº¡n:" /><DatePicker fx:id="dpVoucherDate" /></VBox>
                        <VBox><Label text="." visible="false"/><Button onAction="#handleAddVoucher" text="Táº O MÃƒ" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/></VBox>
                        <VBox><Label text="." visible="false"/><Button onAction="#handleDeleteVoucher" text="XÃ“A MÃƒ" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/></VBox>
                    </HBox>
                    <TableView fx:id="tableVoucher" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colVoucherCode" text="MÃ£" />
                            <TableColumn fx:id="colVoucherPercent" text="Má»©c Giáº£m (%)" />
                            <TableColumn fx:id="colVoucherQty" text="SL" />
                            <TableColumn fx:id="colVoucherDate" text="Háº¿t háº¡n" />
                        </columns>
                    </TableView>
                </VBox>
            </Tab>
            
            <Tab text="Thá»‘ng kÃª">
                <VBox alignment="CENTER" spacing="20.0" style="-fx-padding: 30;">
                    <Label text="BIá»‚U Äá»’ DOANH THU" style="-fx-font-size: 24px; -fx-font-weight: bold;" />
                    <Button onAction="#handleLoadChart" text="Cáº­p nháº­t" />
                    <BarChart fx:id="revenueChart" VBox.vgrow="ALWAYS">
                        <xAxis><CategoryAxis label="NgÃ y" /></xAxis>
                        <yAxis><NumberAxis label="Doanh thu" /></yAxis>
                    </BarChart>
                </VBox>
            </Tab>
            
        </TabPane>
    </center>
</BorderPane>